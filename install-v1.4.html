<!doctype html>
<html lang="en" class="no-js">

<head>
    <meta charset="utf-8">

    <!-- begin SEO -->

    <title>Installing v1.4 (hardmod) - hardmodguide</title>

    <meta name="description" content="A reasonably complete guide to DSi hacking, from stock to homebrew.">

    <meta property="og:locale" content="en_US">
    <meta property="og:site_name" content="hardmodguide">
    <meta property="og:title" content="hardmodguide">

    <link rel="canonical" href="https://safan41.github.io/hardmodguide/install-v1.4.html">
    <meta property="og:url" content="https://safan41.github.io/hardmodguide/install-v1.4.html">

    <meta property="og:description" content="A reasonably complete guide to DSi hacking, from stock to homebrew.">

    <script type="application/ld+json">
        {
          "@context" : "http://schema.org",
          "@type" : "Person",
          "name" : "safan41",
          "url" : "https://safan41.github.io/hardmodguide/",
          "sameAs" : null
        }
    </script>
    <!-- end SEO -->

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <script>
        document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
    </script>

    <!-- For all browsers -->
    <link rel="stylesheet" href="https://3ds.guide/assets/css/main.css">

    <meta http-equiv="cleartype" content="on">

    <!-- start custom head snippets -->

    <!-- insert favicons. use http://realfavicongenerator.net/ -->

    <script type="text/javascript">
        var host = "dsiguide.me";
        if ((host == window.location.host) && (window.location.protocol != "https:"))
            window.location.protocol = "https";
    </script>

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">

    <!-- end custom head snippets -->

</head>

<body class="layout--splash">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
        <div class="masthead__inner-wrap">
            <div class="masthead__menu">
                <nav id="site-nav" class="greedy-nav">
                    <ul class="visible-links">

                        <li class="masthead__menu-item masthead__menu-item--lg"><a href="index.html">Guide</a></li>
                        <li class="masthead__menu-item"><a href="credits.html">Credits</a></li>
			<li class="masthead__menu-item"><a href="dumping-dsiwares.html">Dumping DSiWare</a></li>
                    </ul>
                    <ul class="hidden-links links-menu hidden"></ul>
                    <!--see deleted language from source for the language stuff... you shouldn't be seeing this. stop messing w/ the source!/-->
                    <button class="nav-selector" id="toggle-nav"><div class="navicon"></div></button>
                </nav>
            </div>
        </div>
    </div>

    <!--script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-6670011780914577",
    enable_page_level_ads: true
  });
</script-->

    <div id="main" role="main">

        <article class="page" itemscope="" itemtype="http://schema.org/CreativeWork">
            <meta itemprop="headline" content="Installing v1.4 (hardmod)">

            <div class="page__inner-wrap">

                <header>
                    <h1 class="page__title" itemprop="headline">Installing v1.4 (hardmod)
                    </h1>

                </header>

                <section class="page__content" itemprop="text">

                    <hr>

                    <div class="notice"><b>If you need help, ask the <a href="https://discord.gg/8X5ddgH">NDS(i)Brew Scene Discord server</a>!</b></div>

                    <!--hr>

        <!--center>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <!-- Guide -->
                    <!--ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-6670011780914577"
            data-ad-slot="2889110246"
            data-ad-format="auto"></ins>
        <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
        </center-->

                    <hr>

                    <p class="notice--info">We will now install firmware version 1.4, in preparation for RocketLauncher.</p>
                    <p class="notice--warning">You <strong>must</strong> have decent soldering skills for this to work.

                    </p>
                    <div class="notice--danger">There is a risk of bricking. Please ensure that all steps are followed correctly, and keep the NAND backup we will create in a safe place.</div>

                    <h3 id="what-you-need">What you need</h3>

                    <ul>
                        <li>Confidence</li>
                        <li>An SD card reader able to read eMMC chips running in single data-line mode.</li>
                        <li>A pencil-tipped soldering iron, and very fine wire, 28AWG or smaller, preferable 30AWG+.</li>
                        <li>A microSD card adapter</li>
                        <li>The latest release of <a href="files/ugopwn.zip">ugopwn</a> </li>
                        <li>The latest fork of <a href="https://github.com/Jimmy-Z/bfCL/releases/latest">twlbf (bfCL)</a></li>
                        <li>A twlnf firmware v1.4 installation script for your region (<a href="files/install-1.4-USA.nfs">USA</a> or <a href="files/install-1.4-EUR.nfs">EUR</a>)</li>
                        <li>The latest release of <a href="https://www.python.org/downloads/">Python 3</a></li>
                        <li><i class="fa fa-magnet" aria-hidden="true" title="This is a magnet link. Use a torrent client to download the file."></i> - <a href="magnet:?xt=urn:btih:9df419c1983140b3ce1c520697272e9e7a38bd58&dn=DSiFirmwareFiles
                        "><code class="highlighter-rouge">DSi firmware files.zip</code></a></li>
                        <li>The latest release of <a href="https://mega.nz/#!sm4BWKoQ!KgHd58CzKknqmGQO2nicnn-JYcYixB9YZdqQz4Lm-Z8">TWLTool</a> </li>
                        <li>The latest release of <a href="http://problemkaputt.de/gba.htm">No$GBA</a> </li>
                        <li>The <a href="https://github.com/dsiguide/dsiguide.github.io/raw/master/files/dsi%20footer%20template.bin">DSi footer template</a></li>
                        <li>The latest release of <a href="https://mh-nexus.de/en/downloads.php?product=HxD">HxD</a> </li>
                        <li>The latest release of <a href="files/NUSDownloader.zip">NUS Downloader (with sort.py)</a> </li>
                        <li><a href="https://sourceforge.net/projects/win32diskimager/files/Archive/Win32DiskImager-0.9.5-install.exe/download">Win32DiskImager</a></li>
                    </ul>

                    <!-- And this is where it ends and goes to the next step-->

                    <h3 id="instructions">Instructions</h3>
                    <h4 id="section-i---gathering-files">Section I - The hardmod</h4>

                    <ol>
                        <li>Power offyour device.</li>
                        <li>Disassemble your device</li>
                        <ul><li>If you have a DSi go <a href="https://www.ifixit.com/Teardown/Nintendo+DSi+Teardown/714">here</a></li>
                            <li>If you have a Dsi XL go <a href="https://www.youtube.com/watch?v=srg13lycHx8">here</a></li>
                        </ul>
                        <li>Put the NAND board (the biggest board) in front of you and examine these images (corresponding to your device)</li>
                        <p class="notice--info">Dsi Side A Pinouts <img src="images/pinouts/DSi/a.jpg" alt="You need to see this"/></p>
                        <p class="notice--info">Dsi Side B Pinouts <img src="images/pinouts/DSi/b.png" alt="You need to see this"/></p>                        
                        <p class="notice--info">Dsi XL Side B Pinouts <img src="images/pinouts/DSi XL/nand.png" alt="You need to see this"/></p>                        
                        <li>Make sure you now where the CLK, GND, CMD, and DAT0 pinouts are and solder them to an microSD card reader</li>
                        <p class="notice--info">microSD Exmaple<img src="images/sd.jpg" alt="You need to see this"/> </p>
                        <li>Turn on the Dsi. The error code that pops up should be <code class="highlighter-rouge">0000FE00</code></li>
                        <ul><li>If it isn't go to <a href="troubleshooting.html">troubleshooting</a></li></ul>
                        <li>Stick the microSD card reader into a your SD card reader and insert it to your computer. On windows if it asks you to format it, click no or you will <strong>brick!</strong></li>
                        <li>Install Win32DiskImager form the downloads and open it</li>
                        <li>Click the folder icon and browse to your desktop. In the text box, write NAND_0.bin. When selecting type, choose All types *.* </li>
                        <li>Choose the device that is the DSi and click read. Once it is done, click the folder icon,change the name to NAND_1 and read again</li>
                        <li>Open HxD and drag both files into the editor. Go to the top bar, click "Analysis",click "File compare" from the drop down menu, then click "Compare". </li>
                        <li>Choose to compare both files then click OK when done</li>
                        <ul><li>If it says "The chosen files are identical.", you are good to go to the next section</li>
                        <li>If it doesn't say that, and both NANDs aren't around 240MB, dump NAND_1/NAND_0 again</li>
                        </ul>
                        <li>Copy <code class="highlighter-rouge">NAND_0.bin</code> to a safe place on your computer. <em>Do not lose this file!</em> It is an essential backup.</li>
                    </ol>
                    <h4 id="section-ii---nus">Section II - Downloading v1.4 Files/Getting CID and Console ID</h4>
                    <h4 id="part-i-section-ii">Part I - Getting CID and Console ID</h4>
                    <ol>
                        <li>Open bfCL and <a href="https://gbatemp.net/threads/twlbf-a-tool-to-brute-force-dsi-console-id-or-emmc-cid.481732/">figure out how to use it</a></li>
                        <li>Once your DSi's console ID/CID is dumped, save them in a text file </li>
                        <ul><li>This is something I don't currently how to use. If you can't figure it out, wait for this guide to be finished</li></ul>
                        </ol>
                        <h4 id=part-ii-section-ii>Part II - Mounting/Decrypting NAND</h4>
                        <ol><li>Use this command template (replace the Console ID/CID here) and put it in a text file</li>
                        <ul><li><code class="highlighter-rouge">twltool nandcrypt --cid [CID HERE] --consoleid [ConsoleID HERE] --in NAND_0.bin --out NAND_DEC.bin</code></li></ul>
                        <li>Open the folder where Twltool (extracted) is and put your NAND_0.bin there </li>
                        <li>Open a terminal in that folder.</li>
                        <ul><li>Right click and click on "Open command window here"</li></ul>
                        <li>Paste your command and wait for it to finish decrypting your NAND. The outcome should be <code class="highlighter-rouge">NAND_DEC.bin</code></li>
                        <li>Install and open OSFMount</li>
  <li>Click the "Mount new..." button, followed by the "Image File" tick mark</li>
  <li>Press the button with the three periods (...) and select NAND_DEC.bin</li>
  <li>Select "Partition 0" when prompted. This file should be around 200 MB</li>
  <li>Uncheck the box that says "Read-Only Drive", and press OK</li>
  <li>Go to the "My Computer" directory, and you should see a new drive. Double-click it</li>
  

                        <h4 id="part-ii-section-ii">Part III - Getting Firmware files </h4>
                        <li>Open <code class="highlighter-rouge">NUS Downloader.exe</code> and check the box that says "Create Decryped Contents (*.app)"</li>
                        <li>Select: Database &gt; System (DSi) &gt; System Menu (Launcher) &gt; [Your Region] &gt; v512 </li>
  <li>Select "Start NUS Download!"</li>
  <li>When done, select: Database &gt; System (DSi) &gt; Nintendo DS Cart Whitelist &gt; All &gt; v256 </li>
  <li>Select "Start NUS Download!"</li>
  <li>When done, select: Database &gt; System (DSi) &gt; System Settings &gt; [Your Region] &gt; v512 </li>
  <li>Select "Start NUS Download!"</li>
  <li>When done, select: Database &gt; System (DSi) &gt; Version Data &gt; [Your Region] &gt; v4 (China) </li>
  <li>Select "Start NUS Download!"</li>
  <li>Exit NUS Downloader, and run <code class="highlighter-rouge">sort.py</code> to prepare the titles for installation.</li>
                        <li>You now have a new folder called <code class="highlighter-rouge">title</code> in your NUS Downloader directory.</li>
  <li>Drag the titles folder from the NUS Downloader folder into the root of the NAND</li>
  <li>Go to your OSFMount window, and press "Dismount". Exit OSFMount.</li>
  <li> Do steps 1-4 but use NAND_DEC instead of NAND_O, and use this command instead</li>
  <ul><li><code class="highlighter-rouge">twltool nandcrypt --cid [CID HERE] --consoleid [ConsoleID HERE] --in NAND_DEC.bin --out NAND_ENC.bin</code></li></ul>  
                    </ol>
              <h4 id="section-iii---testing">Section III - Testing Your Downgraded NAND with NO$GBA and flashing to DSi</h4>
          <ol>
              <li>Download and extract NO$GBA to a directory.</li>
              <li>Copy the NAND_ENC.bin file to your NO$GBA directory (make sure you have extracted the NO$GBA archive) and rename it to DSI-1.mmc</li>
              <li>Extract the DSi BIOS files from the "DSi firmware files.zip" archive into the NO$GBA directory</li>
              <li>Download the DSi footer template file and extract it to the NO$GBA directory. </li>
              <li>Open it in HxD. </li>
              <li>Replace the 16 bytes filed with AAs with your CID </li>
              <li>Replace the 8 bytes filed with BBs with your Console ID, but reversed. This means that if your Console ID starts with the byte 26 and ends with 08, for example, it should now end with 26 and start with 08. </li>
              <li>After you have inserted your CID and Console ID, highlight and copy the entire footer file.  </li>
              <li>Open DSi-1.mmc and scroll to the end of the file. At the end of the file, paste in the footer. </li>
              <li>Save and close DSi-1.mmc and open No$GBA.</li>
              <li>Go to options and then Emulation setup.</li>
              <li>In the Emulation tab, set “Reset/Startup Entrypoint” to “GBA/NDS BIOS (Nintendo logo)” and NDS Mode Colors to “DSi (retail/16MB)”. Then click Save Now and then OK.</li>
              <li>Go to File, Cartridge Menu (FileName), and then open any .nds file (such as <a href="https://github.com/Nuck-TH/fwTool/releases">fwtool</a></li>
              <li>Your NAND will now be emulated by NO$GBA. Check that your NAND works perfectly</li>
              <li>If your encrypted NAND works on NO$GBA, then rename the "NAND_ENC.bin" file to nand_dsi.bin (if it asks you to overwrite, you may want to move the other nand_dsi.bin somewhere else and try renaming it again)</li>
              <li>Move the new nand_dsi.bin to the folder to your desktop. Then open Win32DiskImager, folder icon, choose <code class="highlighter-rouge">nand_dsi.bin</code> and flash it with the "Write" button </li>
              </ol>
                    <p class="notice--primary"><a href="entrypoint.html">Continue to installing a premanant entrypoint</a>
                    </p>
                </section>

                <footer class="page__meta">

                </footer>

            </div>

        </article>

    </div>

    <div class="page__footer">
        <footer>
            <!-- start custom footer snippets -->
            <!-- end custom footer snippets -->
            <div class="page__footer-copyright">&copy; 2018 safan41 - Original guide by <a href="https://gbatemp.net/threads/dsi-downgrading-the-complete-guide.393682/">Gadorach</a> - Site design by <a href="https://github.com/Plailect">Plailect</a> - <a href="https://github.com/safan41/hardmodguide">Source</a>
        </footer>
        </div>
       
        <script src="https://3ds.guide/assets/js/main.min.js"></script>

</body>

</html>
